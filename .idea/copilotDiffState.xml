<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/antam/app/controller/dialog/SuaKhachHangController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/antam/app/controller/dialog/SuaKhachHangController.java" />
              <option name="updatedContent" value="/*&#10; * @ (#) SuaKhachHangController.java   1.0 28/10/25&#10; *&#10; * Copyright (c) 2025 IUH. All rights reserved.&#10; */&#10;package com.antam.app.controller.dialog;&#10;&#10;import com.antam.app.dao.KhachHang_DAO;&#10;import com.antam.app.entity.KhachHang;&#10;import javafx.fxml.FXML;&#10;import javafx.fxml.Initializable;&#10;import javafx.scene.control.Alert;&#10;import javafx.scene.control.Button;&#10;import javafx.scene.control.TextField;&#10;&#10;import java.net.URL;&#10;import java.util.ResourceBundle;&#10;&#10;/*&#10; * @description Controller for updating customer information&#10; * @author: Tran Tuan Hung&#10; * @date: 28/10/25&#10; * @version: 1.0&#10; */&#10;public class SuaKhachHangController implements Initializable {&#10;&#10;    @FXML&#10;    private TextField txtMaKhachHang;&#10;&#10;    @FXML&#10;    private TextField txtTenKhachHang;&#10;&#10;    @FXML&#10;    private TextField txtSoDienThoai;&#10;&#10;    @FXML&#10;    private Button btnLuu;&#10;&#10;    @FXML&#10;    private Button btnHuy;&#10;&#10;    private KhachHang khachHang;&#10;    private KhachHang_DAO khachHangDAO;&#10;&#10;    @Override&#10;    public void initialize(URL location, ResourceBundle resources) {&#10;        // Khởi tạo DAO&#10;        khachHangDAO = new KhachHang_DAO();&#10;&#10;        // Thiết lập sự kiện cho nút Lưu&#10;        btnLuu.setOnAction(event -&gt; handleLuu());&#10;&#10;        // Thiết lập sự kiện cho nút Hủy&#10;        btnHuy.setOnAction(event -&gt; handleHuy());&#10;    }&#10;&#10;    /**&#10;     * Thiết lập dữ liệu khách hàng để hiển thị trong form&#10;     */&#10;    public void setKhachHang(KhachHang kh) {&#10;        this.khachHang = kh;&#10;        if (khachHang != null) {&#10;            txtMaKhachHang.setText(khachHang.getMaKH());&#10;            txtTenKhachHang.setText(khachHang.getTenKH());&#10;            txtSoDienThoai.setText(khachHang.getSoDienThoai());&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Xử lý sự kiện click nút Lưu&#10;     */&#10;    private void handleLuu() {&#10;        // Kiểm tra dữ liệu đầu vào&#10;        if (txtTenKhachHang.getText().trim().isEmpty()) {&#10;            showError(&quot;Lỗi&quot;, &quot;Tên khách hàng không được để trống&quot;);&#10;            return;&#10;        }&#10;&#10;        if (txtSoDienThoai.getText().trim().isEmpty()) {&#10;            showError(&quot;Lỗi&quot;, &quot;Số điện thoại không được để trống&quot;);&#10;            return;&#10;        }&#10;&#10;        // Kiểm tra định dạng số điện thoại (đơn giản: chỉ chứa số)&#10;        if (!txtSoDienThoai.getText().matches(&quot;\\d+&quot;)) {&#10;            showError(&quot;Lỗi&quot;, &quot;Số điện thoại phải chỉ chứa các chữ số&quot;);&#10;            return;&#10;        }&#10;&#10;        try {&#10;            // Cập nhật thông tin khách hàng&#10;            khachHang.setTenKH(txtTenKhachHang.getText().trim());&#10;            khachHang.setSoDienThoai(txtSoDienThoai.getText().trim());&#10;&#10;            // Lưu vào database&#10;            boolean success = khachHangDAO.updateKhachHang(khachHang);&#10;&#10;            if (success) {&#10;                showInfo(&quot;Thành công&quot;, &quot;Cập nhật thông tin khách hàng thành công&quot;);&#10;                // Đóng dialog&#10;                btnHuy.getScene().getWindow().hide();&#10;            } else {&#10;                showError(&quot;Lỗi&quot;, &quot;Không thể cập nhật thông tin khách hàng&quot;);&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            showError(&quot;Lỗi&quot;, &quot;Lỗi khi cập nhật: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Xử lý sự kiện click nút Hủy&#10;     */&#10;    private void handleHuy() {&#10;        // Đóng dialog mà không lưu&#10;        btnHuy.getScene().getWindow().hide();&#10;    }&#10;&#10;    /**&#10;     * Hiển thị dialog lỗi&#10;     */&#10;    private void showError(String title, String message) {&#10;        Alert alert = new Alert(Alert.AlertType.ERROR);&#10;        alert.setTitle(title);&#10;        alert.setHeaderText(null);&#10;        alert.setContentText(message);&#10;        alert.showAndWait();&#10;    }&#10;&#10;    /**&#10;     * Hiển thị dialog thông tin&#10;     */&#10;    private void showInfo(String title, String message) {&#10;        Alert alert = new Alert(Alert.AlertType.INFORMATION);&#10;        alert.setTitle(title);&#10;        alert.setHeaderText(null);&#10;        alert.setContentText(message);&#10;        alert.showAndWait();&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>